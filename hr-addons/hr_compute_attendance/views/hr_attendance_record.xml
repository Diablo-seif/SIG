<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="view_hr_attendance_record_filter" model="ir.ui.view">
        <field name="name">hr.attendance.record.filter</field>
        <field name="model">hr.attendance.record</field>
        <field name="arch" type="xml">
            <search string="Attendance Records">
                <field name="name"/>
                <field name="date"/>
                <field name="weekday" filter_domain="[('weekday','=', self)]"/>
                <field name="month" filter_domain="[('month','=',self)]"/>
                <field name="employee_id"/>
                <separator/>
                <filter string="Within Contract Duration"
                        name="within_contract_duration_true"
                        domain="[('within_contract_duration','=',True)]"/>
                <filter string="Not Within Contract Duration"
                        name="within_contract_duration_false"
                        domain="[('within_contract_duration','=',False)]"/>
                <separator/>
                <group expand="0" string="Group By">
                    <filter name="groupby_date" string="Date" domain="[]"
                            context="{'group_by':'date'}" help=" "/>
                    <separator/>
                    <filter name="groupby_employee_id" string="Employee"
                            domain="[]" context="{'group_by':'employee_id'}"
                            help=" "/>
                    <filter name="groupby_weekday" string="Weekday"
                            domain="[]" context="{'group_by':'weekday'}"
                            help=" "/>
                    <filter name="groupby_month" string="Month"
                            domain="[]" context="{'group_by':'month'}"
                            help=" "/>
                    <separator/>

                </group>
            </search>
        </field>
    </record>

    <record id="view_hr_attendance_record_form" model="ir.ui.view">
        <field name="name">hr.attendance.record.form</field>
        <field name="model">hr.attendance.record</field>
        <field name="arch" type="xml">
            <form string="Attendance Records" create="false" duplicate="false"
                  edit="false" delete="false">
                <sheet>
                <div class="oe_title">
                    <label for="name" string="Date and Employee: "
                           class="oe_edit_only"/>
                    <h1>
                        <field name="name" class="oe_inline"/>
                        <![CDATA[&nbsp;]]>
                        <field name="date" class="oe_inline"/>
                        <![CDATA[&nbsp;]]>
                        <field name="employee_id" class="oe_inline"/>
                    </h1>
                </div>
                <group>
                    <group>
                        <field name="weekday" readonly="1" groups="base.group_no_one"/>
                        <field name="contract_id" readonly="1"/>
                        <field name="within_contract_duration" readonly="1"/>
                        <field name="month" readonly="1"/>
                        <field name="resource_calendar_id" readonly="1"/>
                        <field name="working_schedule_hours" groups="base.group_no_one"
                               widget="float_time"/>
                        <field name="must_attend_hours" widget="float_time" groups="base.group_no_one"/>
                        <field name="interval_count" groups="base.group_no_one"/>
                        <field name="attend_interval" groups="base.group_no_one"/>
                    </group>
                    <group>
                        <field name="total_actual_working_hours" groups="base.group_no_one"
                               widget="float_time" readonly="1"/>
                        <field name="total_missing_hours" groups="base.group_no_one"
                               widget="float_time" readonly="1"/>
                        <field name="total_penalty_percentage"/>
                        <field name="total_penalty_amount"/>
                        <field name="absent_interval" groups="base.group_no_one"/>
                        <field name="absent_penalty_value"/>
                    </group>
                </group>
                    <notebook>
                        <page string="Intervals">
                            <field name="interval_ids" nolabel="1">
                                <list decoration-danger="is_attend==False">
                                    <field name="start_datetime"/>
                                    <field name="end_datetime"/>
                                    <field name="allow_form_datetime" optional="hide"/>
                                    <field name="allow_to_datetime" optional="hide"/>
                                    <field name="working_hours" optional="hide"
                                           widget="float_time"/>
                                    <field name="min_hours_attend" optional="hide"
                                           widget="float_time"/>
                                    <field name="is_attend"/>
                                    <field name="absent_redundant" optional="hide"/>
                                    <field name="absent_value"/>
                                    <field name="actual_working_hours" optional="hide"
                                           widget="float_time"/>
                                    <field name="delay_in" sum="delay_in" optional="hide"/>
                                    <field name="penalty_in_redundant" optional="hide"/>
                                    <field name="penalty_in_id" optional="hide"/>
                                    <field name="penalty_in_percentage"
                                           sum="penalty_in_percentage"/>
                                    <field name="penalty_in_amount"
                                           sum="penalty_in_amount"/>
                                    <field name="early_out" optional="hide"
                                           sum="early_out"/>
                                    <field name="penalty_out_redundant" optional="hide"/>
                                    <field name="penalty_out_id" optional="hide"/>
                                    <field name="penalty_out_percentage"
                                           sum="penalty_out_percentage"/>
                                    <field name="penalty_out_amount"
                                           sum="penalty_out_amount"/>
                                    <field name="missing_hours" optional="hide"
                                           widget="float_time"/>
                                    <field name="penalty_missing_id" optional="hide"/>
                                    <field name="penalty_missing_redundant" optional="hide"/>
                                    <field name="penalty_missing_percentage"
                                           sum="penalty_missing_percentage"/>
                                    <field name="penalty_missing_amount"
                                           sum="penalty_missing_amount"/>
                                </list>
                                <form>
                                    <group>
                                        <group>
                                            <field name="start_datetime"
                                                   readonly="1"/>
                                            <field name="delay_in"
                                                   readonly="1"/>
                                            <field name="penalty_in_redundant"
                                                   readonly="1"/>
                                            <field name="penalty_in_id"/>
                                            <field name="penalty_in_percentage"/>
                                            <field name="penalty_in_amount"/>
                                            <field name="is_attend"
                                                   readonly="1"/>
                                            <field name="absent_redundant"
                                                   readonly="1"/>
                                            <field name="absent_value"
                                                   readonly="1"/>

                                        </group>
                                        <group>
                                            <field name="end_datetime"
                                                   readonly="1"/>
                                            <field name="early_out"
                                                   readonly="1"/>
                                            <field name="penalty_out_redundant"
                                                   readonly="1"/>
                                            <field name="penalty_out_id"/>
                                            <field name="penalty_out_percentage"/>
                                            <field name="penalty_out_amount"/>
                                        </group>
                                    </group>
                                    <group>
                                        <group>
                                            <field name="working_hours"
                                                   widget="float_time"
                                                   readonly="1"/>
                                            <field name="min_hours_attend"
                                                   widget="float_time"
                                                   readonly="1"/>
                                            <field name="actual_working_hours"
                                                   widget="float_time"
                                                   readonly="1"/>
                                        </group>
                                        <group>
                                            <field name="missing_hours"
                                                   widget="float_time"
                                                   readonly="1"/>
                                            <field name="penalty_missing_id"/>
                                            <field name="penalty_missing_redundant"/>
                                            <field name="penalty_missing_percentage"/>
                                            <field name="penalty_missing_amount"/>
                                        </group>
                                    </group>
                                </form>
                            </field>
                        </page>
                        <page name="attendance_page" string="Attendances">
                            <field name="attendance_ids" >
                                <list>
                                    <field name="check_in"/>
                                    <field name="check_out"/>
                                    <field name="worked_hours"
                                           widget="float_time"/>
                                </list>
                            </field>
                        </page>
                        <page name="leave_page" string="Time Off">
                            <field name="leave_ids">
                                <list>
                                    <field name="calendar_id"/>
                                    <field name="time_type"/>
                                    <field name="name"/>
                                    <field name="date_from"/>
                                    <field name="date_to"/>
                                </list>
                            </field>
                        </page>

                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <record id="view_hr_attendance_record_tree" model="ir.ui.view">
        <field name="name">hr.attendance.record.tree</field>
        <field name="model">hr.attendance.record</field>
        <field name="arch" type="xml">
            <list create="false" duplicate="false" edit="false" delete="true"
                  decoration-danger="interval_count==0"
                  decoration-info="absent_interval>0"
                  decoration-success="absent_interval==0 and interval_count>0">
                <field name="name"/>
                <field name="date"/>
                <field name="weekday" optional="hide"/>
                <field name="month"/>
                <field name="employee_id"/>
                <field name="working_schedule_hours" widget="float_time" optional="hide"
                       sum="working_schedule_hours"/>
                <field name="must_attend_hours" widget="float_time" optional="hide"
                       sum="must_attend_hours"/>
                <field name="interval_count" sum="interval_count" optional="hide"/>
                <field name="total_actual_working_hours" widget="float_time" optional="hide"
                       sum="total_actual_working_hours"/>
                <field name="total_missing_hours" widget="float_time" optional="hide"
                       sum="total_missing_hours"/>
                <field name="attend_interval" sum="attend_interval" optional="hide"/>
                <field name="absent_interval" sum="absent_interval" optional="hide"/>
                <field name="absent_penalty_value" sum="absent_penalty_value"/>
                <field name="total_penalty_percentage" sum="total_penalty_percentage"/>
                <field name="total_penalty_amount" sum="total_penalty_amount"/>
            </list>
        </field>
    </record>

    <record id="view_hr_attendance_record_kanban" model="ir.ui.view">
        <field name="name">hr.attendance.record.kanban</field>
        <field name="model">hr.attendance.record</field>
        <field name="arch" type="xml">
            <kanban class="o_kanban_mobile">
                <templates>
                    <t t-name="kanban-box">
                        <div class="oe_kanban_global_click">
                            <div>
                                <strong>
                                    <field name="employee_id"/>
                                </strong>
                            </div>
                            <div>
                                <span>Day:</span>
                                <field name="name"/>
                                <span>Date:</span>
                                <field name="date"/>
                                <field name="weekday"/>
                                <field name="month"/>
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>

    <record id="view_hr_attendance_record_action" model="ir.actions.act_window">
        <field name="name">Attendance Records</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">hr.attendance.record</field>
        <field name="view_mode">list,kanban,form</field>
        <field name="target">current</field>
    </record>

    <menuitem id="menu_hr_attendance_record" name="Attendance Records"
              parent="hr_attendance.menu_hr_attendance_view_attendances"
              sequence="20"
              action="view_hr_attendance_record_action"/>

    <menuitem id="menu_hr_attendance_record_as_is" name="Attendances"
              parent="hr_attendance.menu_hr_attendance_view_attendances"
              sequence="1"
              action="hr_attendance.hr_attendance_action"/>
              


</odoo>
